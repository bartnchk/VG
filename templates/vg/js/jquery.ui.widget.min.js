"use strict";!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.ui=t.ui||{};var e=(t.ui.version="1.12.1",0),i=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(t){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r={},l=e.split(".")[0];e=e.split(".")[1];var u=l+"-"+e;return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][u.toLowerCase()]=function(e){return!!t.data(e,u)},t[l]=t[l]||{},n=t[l][e],o=t[l][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(s,function(e,s){if(!t.isFunction(s))return void(r[e]=s);r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}()}),o.prototype=t.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},r,{constructor:o,namespace:l,widgetName:e,widgetFullName:u}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var s,n,o=i.call(arguments,1),a=0,r=o.length;a<r;a++)for(s in o[a])n=o[a][s],o[a].hasOwnProperty(s)&&void 0!==n&&(t.isPlainObject(n)?e[s]=t.isPlainObject(e[s])?t.widget.extend({},e[s],n):t.widget.extend({},n):e[s]=n);return e},t.widget.bridge=function(e,s){var n=s.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,r=i.call(arguments,1),l=this;return a?this.length||"instance"!==o?this.each(function(){var i,s=t.data(this,n);return"instance"===o?(l=s,!1):s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,r),i!==s&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):l=void 0:(r.length&&(o=t.widget.extend.apply(null,[o].concat(r))),this.each(function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new s(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;o<s.length-1;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,r;for(r=0;r<i.length;r++)a=n.classesElementLookup[i[r]]||t(),a=t(e.add?t.unique(a.get().concat(e.element.get())):a.not(e.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&e.classes[i[r]]&&s.push(e.classes[i[r]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,h=l[2];h?n.on(u,h,r):i.on(u,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&!1===a.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?!0===n||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}});t.widget});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS51aS53aWRnZXQuanMiXSwibmFtZXMiOlsiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImpRdWVyeSIsIiQiLCJ1aSIsIndpZGdldFV1aWQiLCJ2ZXJzaW9uIiwid2lkZ2V0U2xpY2UiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2xlYW5EYXRhIiwib3JpZyIsImVsZW1zIiwiZXZlbnRzIiwiZWxlbSIsImkiLCJfZGF0YSIsInJlbW92ZSIsInRyaWdnZXJIYW5kbGVyIiwiZSIsIndpZGdldCIsIm5hbWUiLCJiYXNlIiwiZXhpc3RpbmdDb25zdHJ1Y3RvciIsImNvbnN0cnVjdG9yIiwiYmFzZVByb3RvdHlwZSIsInByb3hpZWRQcm90b3R5cGUiLCJuYW1lc3BhY2UiLCJzcGxpdCIsImZ1bGxOYW1lIiwiV2lkZ2V0IiwiaXNBcnJheSIsImV4dGVuZCIsImFwcGx5IiwiY29uY2F0IiwiZXhwciIsInRvTG93ZXJDYXNlIiwiZGF0YSIsIm9wdGlvbnMiLCJlbGVtZW50IiwidGhpcyIsIl9jcmVhdGVXaWRnZXQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJfcHJvdG8iLCJfY2hpbGRDb25zdHJ1Y3RvcnMiLCJlYWNoIiwicHJvcCIsInZhbHVlIiwiaXNGdW5jdGlvbiIsIl9zdXBlciIsIl9zdXBlckFwcGx5IiwiYXJncyIsInJldHVyblZhbHVlIiwiX19zdXBlciIsIl9fc3VwZXJBcHBseSIsIndpZGdldEV2ZW50UHJlZml4Iiwid2lkZ2V0TmFtZSIsIndpZGdldEZ1bGxOYW1lIiwiY2hpbGQiLCJjaGlsZFByb3RvdHlwZSIsInB1c2giLCJicmlkZ2UiLCJpbnB1dCIsImNhbGwiLCJpbnB1dEluZGV4IiwiaW5wdXRMZW5ndGgiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsInVuZGVmaW5lZCIsInRhcmdldCIsImlzUGxhaW5PYmplY3QiLCJvYmplY3QiLCJpc01ldGhvZENhbGwiLCJmbiIsImluc3RhbmNlIiwibWV0aG9kVmFsdWUiLCJjaGFyQXQiLCJqcXVlcnkiLCJwdXNoU3RhY2siLCJnZXQiLCJlcnJvciIsIl9pbml0Iiwib3B0aW9uIiwiZGlzYWJsZWQiLCJjcmVhdGUiLCJldmVudE5hbWVzcGFjZSIsImhvdmVyYWJsZSIsImZvY3VzYWJsZSIsImRlZmF1bHRFbGVtZW50IiwiY2xhc3Nlc0VsZW1lbnRMb29rdXAiLCJ1dWlkIiwiYmluZGluZ3MiLCJkb2N1bWVudCIsImV2ZW50Iiwib3duZXJEb2N1bWVudCIsIndpbmRvdyIsImRlZmF1bHRWaWV3IiwicGFyZW50V2luZG93IiwiX3RyaWdnZXIiLCJfZ2V0Q3JlYXRlT3B0aW9ucyIsIl9zZXRPcHRpb25EaXNhYmxlZCIsIl9jcmVhdGUiLCJfZ2V0Q3JlYXRlRXZlbnREYXRhIiwiZGVzdHJveSIsIm5vb3AiLCJ0aGF0IiwiX2Rlc3Ryb3kiLCJfcmVtb3ZlQ2xhc3MiLCJvZmYiLCJyZW1vdmVEYXRhIiwicmVtb3ZlQXR0ciIsInBhcnRzIiwiY3VyT3B0aW9uIiwic2hpZnQiLCJwb3AiLCJfc2V0T3B0aW9ucyIsIl9zZXRPcHRpb25DbGFzc2VzIiwiY2xhc3NLZXkiLCJjdXJyZW50RWxlbWVudHMiLCJlbGVtZW50cyIsImNsYXNzZXMiLCJfdG9nZ2xlQ2xhc3MiLCJhZGRDbGFzcyIsIl9jbGFzc2VzIiwia2V5cyIsImVuYWJsZSIsImFkZCIsInByb2Nlc3NDbGFzc1N0cmluZyIsImNoZWNrT3B0aW9uIiwiY3VycmVudCIsIl9vbiIsInVuaXF1ZSIsIm5vdCIsImV4dHJhIiwiZnVsbCIsIl9hZGRDbGFzcyIsImluQXJyYXkiLCJtYXRjaCIsImpvaW4iLCJfdW50cmFja0NsYXNzZXNFbGVtZW50IiwidG9nZ2xlQ2xhc3MiLCJzdXBwcmVzc0Rpc2FibGVkQ2hlY2siLCJoYW5kbGVycyIsImhhbmRsZXIiLCJoYW5kbGVyUHJveHkiLCJkZWxlZ2F0ZUVsZW1lbnQiLCJldmVudE5hbWUiLCJndWlkIiwic2VsZWN0b3IiLCJvbiIsInNldFRpbWVvdXQiLCJfb2ZmIiwibW91c2VlbnRlciIsIl9kZWxheSIsImZvY3VzaW4iLCJmb2N1c291dCIsImN1cnJlbnRUYXJnZXQiLCJfaG92ZXJhYmxlIiwiY2FsbGJhY2siLCJ0eXBlIiwib3JpZ2luYWxFdmVudCIsInRyaWdnZXIiLCJzaG93IiwibWV0aG9kIiwiZWZmZWN0TmFtZSIsImhhc09wdGlvbnMiLCJpc0VtcHR5T2JqZWN0IiwiZWZmZWN0cyIsInF1ZXVlIiwiaGlkZSIsIm5leHQiLCJkZWZhdWx0RWZmZWN0IiwiZHVyYXRpb24iLCJjb21wbGV0ZSIsImRlbGF5IiwiZWZmZWN0IiwiZWFzaW5nIl0sIm1hcHBpbmdzIjoiY0FLQyxTQUFVQSxHQUNjLGtCQUFYQyxTQUF5QkEsT0FBT0MsSUFHMUNELFFBQVMsVUFBWUQsR0FJckJBLEVBQVNHLFNBQVRILFNBQVNHLEdBUlpDLEVBVUNDLEdBQUFELEVBQUFDLE1BRUFELElBc0JJRSxJQXRCR0YsRUFBUUMsR0FBZkUsUUFBQSxTQXNCaUIsR0FDYkMsRUFBY0MsTUFBTUMsVUFBVUMsS0FFbENQLEdBQUVRLFVBQWMsU0FBVUMsR0FDeEIsTUFBTyxVQUFVQyxHQUNmLEdBQUlDLEdBQVFDLEVBQU1DLENBQ2xCLEtBQU1BLEVBQU4sRUFBQSxPQUFlRCxFQUFPRixFQUFURyxJQUFxQ0EsSUFDaEQsSUFHRUYsRUFBU1gsRUFBRWMsTUFBT0YsRUFBTSxVQUNuQkQsR0FBVUEsRUFBT0ksUUFDcEJmLEVBQUdZLEdBQU9JLGVBQWdCLFVBSTVCLE1BQUFDLElBRUpSLEVBQU1DLEtBRUhGLEVBQUFBLFdBRVBSLEVBQUVrQixPQUFTLFNBQVVDLEVBQU1DLEVBQU1kLEdBQy9CLEdBQUllLEdBQXFCQyxFQUFhQyxFQUlsQ0MsS0FFQUMsRUFBWU4sRUFBS08sTUFBTyxLQUE1QixFQUNBUCxHQUFPQSxFQUFLTyxNQUFPLEtBQW5CLEVBQ0EsSUFBSUMsR0FBV0YsRUFBWSxJQUFNTixDQVRuQyxPQVdRYixLQUNKQSxFQUFZYyxFQUNaQSxFQUFPcEIsRUFBRTRCLFFBR041QixFQUFFNkIsUUFBU3ZCLEtBQ2RBLEVBQVlOLEVBQUU4QixPQUFP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LFNBQVV2SSxFQUFRMkksT0FBUWxCLEdBRXpEeEgsRUFBUWtJLE1BQU8sU0FBVUUsR0FDdkJ6SyxFQUFHc0MsTUFBUTRILEtBQ05MLEdBQ0hBLEVBQVMvRixLQUFNekIsRUFBUyxJQUUxQm9JLFFBTUt6SyxHQUFFa0IiLCJmaWxlIjoianF1ZXJ5LnVpLndpZGdldC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgalF1ZXJ5IFVJIC0gdjEuMTIuMSAtIDIwMTgtMDItMTBcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqIEluY2x1ZGVzOiB3aWRnZXQuanNcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzOyBMaWNlbnNlZCBNSVQgKi9cblxuKGZ1bmN0aW9uKCBmYWN0b3J5ICkge1xuICBpZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xuXG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShbIFwianF1ZXJ5XCIgXSwgZmFjdG9yeSApO1xuICB9IGVsc2Uge1xuXG4gICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgZmFjdG9yeSggalF1ZXJ5ICk7XG4gIH1cbn0oZnVuY3Rpb24oICQgKSB7XG5cbiAgJC51aSA9ICQudWkgfHwge307XG5cbiAgdmFyIHZlcnNpb24gPSAkLnVpLnZlcnNpb24gPSBcIjEuMTIuMVwiO1xuXG5cbiAgLyohXG4gICAqIGpRdWVyeSBVSSBXaWRnZXQgMS4xMi4xXG4gICAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAgICpcbiAgICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAgICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICAgKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gICAqL1xuXG4gIC8vPj5sYWJlbDogV2lkZ2V0XG4gIC8vPj5ncm91cDogQ29yZVxuICAvLz4+ZGVzY3JpcHRpb246IFByb3ZpZGVzIGEgZmFjdG9yeSBmb3IgY3JlYXRpbmcgc3RhdGVmdWwgd2lkZ2V0cyB3aXRoIGEgY29tbW9uIEFQSS5cbiAgLy8+PmRvY3M6IGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2pRdWVyeS53aWRnZXQvXG4gIC8vPj5kZW1vczogaHR0cDovL2pxdWVyeXVpLmNvbS93aWRnZXQvXG5cblxuXG4gIHZhciB3aWRnZXRVdWlkID0gMDtcbiAgdmFyIHdpZGdldFNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuXG4gICQuY2xlYW5EYXRhID0gKCBmdW5jdGlvbiggb3JpZyApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oIGVsZW1zICkge1xuICAgICAgdmFyIGV2ZW50cywgZWxlbSwgaTtcbiAgICAgIGZvciAoIGkgPSAwOyAoIGVsZW0gPSBlbGVtc1sgaSBdICkgIT0gbnVsbDsgaSsrICkge1xuICAgICAgICB0cnkge1xuXG4gICAgICAgICAgLy8gT25seSB0cmlnZ2VyIHJlbW92ZSB3aGVuIG5lY2Vzc2FyeSB0byBzYXZlIHRpbWVcbiAgICAgICAgICBldmVudHMgPSAkLl9kYXRhKCBlbGVtLCBcImV2ZW50c1wiICk7XG4gICAgICAgICAgaWYgKCBldmVudHMgJiYgZXZlbnRzLnJlbW92ZSApIHtcbiAgICAgICAgICAgICQoIGVsZW0gKS50cmlnZ2VySGFuZGxlciggXCJyZW1vdmVcIiApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzgyMzVcbiAgICAgICAgfSBjYXRjaCAoIGUgKSB7fVxuICAgICAgfVxuICAgICAgb3JpZyggZWxlbXMgKTtcbiAgICB9O1xuICB9ICkoICQuY2xlYW5EYXRhICk7XG5cbiAgJC53aWRnZXQgPSBmdW5jdGlvbiggbmFtZSwgYmFzZSwgcHJvdG90eXBlICkge1xuICAgIHZhciBleGlzdGluZ0NvbnN0cnVjdG9yLCBjb25zdHJ1Y3RvciwgYmFzZVByb3RvdHlwZTtcblxuICAgIC8vIFByb3hpZWRQcm90b3R5cGUgYWxsb3dzIHRoZSBwcm92aWRlZCBwcm90b3R5cGUgdG8gcmVtYWluIHVubW9kaWZpZWRcbiAgICAvLyBzbyB0aGF0IGl0IGNhbiBiZSB1c2VkIGFzIGEgbWl4aW4gZm9yIG11bHRpcGxlIHdpZGdldHMgKCM4ODc2KVxuICAgIHZhciBwcm94aWVkUHJvdG90eXBlID0ge307XG5cbiAgICB2YXIgbmFtZXNwYWNlID0gbmFtZS5zcGxpdCggXCIuXCIgKVsgMCBdO1xuICAgIG5hbWUgPSBuYW1lLnNwbGl0KCBcIi5cIiApWyAxIF07XG4gICAgdmFyIGZ1bGxOYW1lID0gbmFtZXNwYWNlICsgXCItXCIgKyBuYW1lO1xuXG4gICAgaWYgKCAhcHJvdG90eXBlICkge1xuICAgICAgcHJvdG90eXBlID0gYmFzZTtcbiAgICAgIGJhc2UgPSAkLldpZGdldDtcbiAgICB9XG5cbiAgICBpZiAoICQuaXNBcnJheSggcHJvdG90eXBlICkgKSB7XG4gICAgICBwcm90b3R5cGUgPSAkLmV4dGVuZC5hcHBseSggbnVsbCwgWyB7fSBdLmNvbmNhdCggcHJvdG90eXBlICkgKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgc2VsZWN0b3IgZm9yIHBsdWdpblxuICAgICQuZXhwclsgXCI6XCIgXVsgZnVsbE5hbWUudG9Mb3dlckNhc2UoKSBdID0gZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICByZXR1cm4gISEkLmRhdGEoIGVsZW0sIGZ1bGxOYW1lICk7XG4gICAgfTtcblxuICAgICRbIG5hbWVzcGFjZSBdID0gJFsgbmFtZXNwYWNlIF0gfHwge307XG4gICAgZXhpc3RpbmdDb25zdHJ1Y3RvciA9ICRbIG5hbWVzcGFjZSBdWyBuYW1lIF07XG4gICAgY29uc3RydWN0b3IgPSAkWyBuYW1lc3BhY2UgXVsgbmFtZSBdID0gZnVuY3Rpb24oIG9wdGlvbnMsIGVsZW1lbnQgKSB7XG5cbiAgICAgIC8vIEFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCBcIm5ld1wiIGtleXdvcmRcbiAgICAgIGlmICggIXRoaXMuX2NyZWF0ZVdpZGdldCApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjb25zdHJ1Y3Rvciggb3B0aW9ucywgZWxlbWVudCApO1xuICAgICAgfVxuXG4gICAgICAvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgaW5pdGlhbGl6aW5nIGZvciBzaW1wbGUgaW5oZXJpdGFuY2VcbiAgICAgIC8vIG11c3QgdXNlIFwibmV3XCIga2V5d29yZCAodGhlIGNvZGUgYWJvdmUgYWx3YXlzIHBhc3NlcyBhcmdzKVxuICAgICAgaWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xuICAgICAgICB0aGlzLl9jcmVhdGVXaWRnZXQoIG9wdGlvbnMsIGVsZW1lbnQgKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRXh0ZW5kIHdpdGggdGhlIGV4aXN0aW5nIGNvbnN0cnVjdG9yIHRvIGNhcnJ5IG92ZXIgYW55IHN0YXRpYyBwcm9wZXJ0aWVzXG4gICAgJC5leHRlbmQoIGNvbnN0cnVjdG9yLCBleGlzdGluZ0NvbnN0cnVjdG9yLCB7XG4gICAgICB2ZXJzaW9uOiBwcm90b3R5cGUudmVyc2lvbixcblxuICAgICAgLy8gQ29weSB0aGUgb2JqZWN0IHVzZWQgdG8gY3JlYXRlIHRoZSBwcm90b3R5cGUgaW4gY2FzZSB3ZSBuZWVkIHRvXG4gICAgICAvLyByZWRlZmluZSB0aGUgd2lkZ2V0IGxhdGVyXG4gICAgICBfcHJvdG86ICQuZXh0ZW5kKCB7fSwgcHJvdG90eXBlICksXG5cbiAgICAgIC8vIFRyYWNrIHdpZGdldHMgdGhhdCBpbmhlcml0IGZyb20gdGhpcyB3aWRnZXQgaW4gY2FzZSB0aGlzIHdpZGdldCBpc1xuICAgICAgLy8gcmVkZWZpbmVkIGFmdGVyIGEgd2lkZ2V0IGluaGVyaXRzIGZyb20gaXRcbiAgICAgIF9jaGlsZENvbnN0cnVjdG9yczogW11cbiAgICB9ICk7XG5cbiAgICBiYXNlUHJvdG90eXBlID0gbmV3IGJhc2UoKTtcblxuICAgIC8vIFdlIG5lZWQgdG8gbWFrZSB0aGUgb3B0aW9ucyBoYXNoIGEgcHJvcGVydHkgZGlyZWN0bHkgb24gdGhlIG5ldyBpbnN0YW5jZVxuICAgIC8vIG90aGVyd2lzZSB3ZSdsbCBtb2RpZnkgdGhlIG9wdGlvbnMgaGFzaCBvbiB0aGUgcHJvdG90eXBlIHRoYXQgd2UncmVcbiAgICAvLyBpbmhlcml0aW5nIGZyb21cbiAgICBiYXNlUHJvdG90eXBlLm9wdGlvbnMgPSAkLndpZGdldC5leHRlbmQoIHt9LCBiYXNlUHJvdG90eXBlLm9wdGlvbnMgKTtcbiAgICAkLmVhY2goIHByb3RvdHlwZSwgZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xuICAgICAgaWYgKCAhJC5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuICAgICAgICBwcm94aWVkUHJvdG90eXBlWyBwcm9wIF0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcHJveGllZFByb3RvdHlwZVsgcHJvcCBdID0gKCBmdW5jdGlvbigpIHtcbiAgICAgICAgZnVuY3Rpb24gX3N1cGVyKCkge1xuICAgICAgICAgIHJldHVybiBiYXNlLnByb3RvdHlwZVsgcHJvcCBdLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9zdXBlckFwcGx5KCBhcmdzICkge1xuICAgICAgICAgIHJldHVybiBiYXNlLnByb3RvdHlwZVsgcHJvcCBdLmFwcGx5KCB0aGlzLCBhcmdzICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9fc3VwZXIgPSB0aGlzLl9zdXBlcjtcbiAgICAgICAgICB2YXIgX19zdXBlckFwcGx5ID0gdGhpcy5fc3VwZXJBcHBseTtcbiAgICAgICAgICB2YXIgcmV0dXJuVmFsdWU7XG5cbiAgICAgICAgICB0aGlzLl9zdXBlciA9IF9zdXBlcjtcbiAgICAgICAgICB0aGlzLl9zdXBlckFwcGx5ID0gX3N1cGVyQXBwbHk7XG5cbiAgICAgICAgICByZXR1cm5WYWx1ZSA9IHZhbHVlLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuICAgICAgICAgIHRoaXMuX3N1cGVyID0gX19zdXBlcjtcbiAgICAgICAgICB0aGlzLl9zdXBlckFwcGx5ID0gX19zdXBlckFwcGx5O1xuXG4gICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9O1xuICAgICAgfSApKCk7XG4gICAgfSApO1xuICAgIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9ICQud2lkZ2V0LmV4dGVuZCggYmFzZVByb3RvdHlwZSwge1xuXG4gICAgICAvLyBUT0RPOiByZW1vdmUgc3VwcG9ydCBmb3Igd2lkZ2V0RXZlbnRQcmVmaXhcbiAgICAgIC8vIGFsd2F5cyB1c2UgdGhlIG5hbWUgKyBhIGNvbG9uIGFzIHRoZSBwcmVmaXgsIGUuZy4sIGRyYWdnYWJsZTpzdGFydFxuICAgICAgLy8gZG9uJ3QgcHJlZml4IGZvciB3aWRnZXRzIHRoYXQgYXJlbid0IERPTS1iYXNlZFxuICAgICAgd2lkZ2V0RXZlbnRQcmVmaXg6IGV4aXN0aW5nQ29uc3RydWN0b3IgPyAoIGJhc2VQcm90b3R5cGUud2lkZ2V0RXZlbnRQcmVmaXggfHwgbmFtZSApIDogbmFtZVxuICAgIH0sIHByb3hpZWRQcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiBjb25zdHJ1Y3RvcixcbiAgICAgIG5hbWVzcGFjZTogbmFtZXNwYWNlLFxuICAgICAgd2lkZ2V0TmFtZTogbmFtZSxcbiAgICAgIHdpZGdldEZ1bGxOYW1lOiBmdWxsTmFtZVxuICAgIH0gKTtcblxuICAgIC8vIElmIHRoaXMgd2lkZ2V0IGlzIGJlaW5nIHJlZGVmaW5lZCB0aGVuIHdlIG5lZWQgdG8gZmluZCBhbGwgd2lkZ2V0cyB0aGF0XG4gICAgLy8gYXJlIGluaGVyaXRpbmcgZnJvbSBpdCBhbmQgcmVkZWZpbmUgYWxsIG9mIHRoZW0gc28gdGhhdCB0aGV5IGluaGVyaXQgZnJvbVxuICAgIC8vIHRoZSBuZXcgdmVyc2lvbiBvZiB0aGlzIHdpZGdldC4gV2UncmUgZXNzZW50aWFsbHkgdHJ5aW5nIHRvIHJlcGxhY2Ugb25lXG4gICAgLy8gbGV2ZWwgaW4gdGhlIHByb3RvdHlwZSBjaGFpbi5cbiAgICBpZiAoIGV4aXN0aW5nQ29uc3RydWN0b3IgKSB7XG4gICAgICAkLmVhY2goIGV4aXN0aW5nQ29uc3RydWN0b3IuX2NoaWxkQ29uc3RydWN0b3JzLCBmdW5jdGlvbiggaSwgY2hpbGQgKSB7XG4gICAgICAgIHZhciBjaGlsZFByb3RvdHlwZSA9IGNoaWxkLnByb3RvdHlwZTtcblxuICAgICAgICAvLyBSZWRlZmluZSB0aGUgY2hpbGQgd2lkZ2V0IHVzaW5nIHRoZSBzYW1lIHByb3RvdHlwZSB0aGF0IHdhc1xuICAgICAgICAvLyBvcmlnaW5hbGx5IHVzZWQsIGJ1dCBpbmhlcml0IGZyb20gdGhlIG5ldyB2ZXJzaW9uIG9mIHRoZSBiYXNlXG4gICAgICAgICQud2lkZ2V0KCBjaGlsZFByb3RvdHlwZS5uYW1lc3BhY2UgKyBcIi5cIiArIGNoaWxkUHJvdG90eXBlLndpZGdldE5hbWUsIGNvbnN0cnVjdG9yLFxuICAgICAgICAgIGNoaWxkLl9wcm90byApO1xuICAgICAgfSApO1xuXG4gICAgICAvLyBSZW1vdmUgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgY2hpbGQgY29uc3RydWN0b3JzIGZyb20gdGhlIG9sZCBjb25zdHJ1Y3RvclxuICAgICAgLy8gc28gdGhlIG9sZCBjaGlsZCBjb25zdHJ1Y3RvcnMgY2FuIGJlIGdhcmJhZ2UgY29sbGVjdGVkXG4gICAgICBkZWxldGUgZXhpc3RpbmdDb25zdHJ1Y3Rvci5fY2hpbGRDb25zdHJ1Y3RvcnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJhc2UuX2NoaWxkQ29uc3RydWN0b3JzLnB1c2goIGNvbnN0cnVjdG9yICk7XG4gICAgfVxuXG4gICAgJC53aWRnZXQuYnJpZGdlKCBuYW1lLCBjb25zdHJ1Y3RvciApO1xuXG4gICAgcmV0dXJuIGNvbnN0cnVjdG9yO1xuICB9O1xuXG4gICQud2lkZ2V0LmV4dGVuZCA9IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XG4gICAgdmFyIGlucHV0ID0gd2lkZ2V0U2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICk7XG4gICAgdmFyIGlucHV0SW5kZXggPSAwO1xuICAgIHZhciBpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICB2YXIga2V5O1xuICAgIHZhciB2YWx1ZTtcblxuICAgIGZvciAoIDsgaW5wdXRJbmRleCA8IGlucHV0TGVuZ3RoOyBpbnB1dEluZGV4KysgKSB7XG4gICAgICBmb3IgKCBrZXkgaW4gaW5wdXRbIGlucHV0SW5kZXggXSApIHtcbiAgICAgICAgdmFsdWUgPSBpbnB1dFsgaW5wdXRJbmRleCBdWyBrZXkgXTtcbiAgICAgICAgaWYgKCBpbnB1dFsgaW5wdXRJbmRleCBdLmhhc093blByb3BlcnR5KCBrZXkgKSAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXG4gICAgICAgICAgLy8gQ2xvbmUgb2JqZWN0c1xuICAgICAgICAgIGlmICggJC5pc1BsYWluT2JqZWN0KCB2YWx1ZSApICkge1xuICAgICAgICAgICAgdGFyZ2V0WyBrZXkgXSA9ICQuaXNQbGFpbk9iamVjdCggdGFyZ2V0WyBrZXkgXSApID9cbiAgICAgICAgICAgICAgJC53aWRnZXQuZXh0ZW5kKCB7fSwgdGFyZ2V0WyBrZXkgXSwgdmFsdWUgKSA6XG5cbiAgICAgICAgICAgICAgLy8gRG9uJ3QgZXh0ZW5kIHN0cmluZ3MsIGFycmF5cywgZXRjLiB3aXRoIG9iamVjdHNcbiAgICAgICAgICAgICAgJC53aWRnZXQuZXh0ZW5kKCB7fSwgdmFsdWUgKTtcblxuICAgICAgICAgICAgLy8gQ29weSBldmVyeXRoaW5nIGVsc2UgYnkgcmVmZXJlbmNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldFsga2V5IF0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcblxuICAkLndpZGdldC5icmlkZ2UgPSBmdW5jdGlvbiggbmFtZSwgb2JqZWN0ICkge1xuICAgIHZhciBmdWxsTmFtZSA9IG9iamVjdC5wcm90b3R5cGUud2lkZ2V0RnVsbE5hbWUgfHwgbmFtZTtcbiAgICAkLmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcbiAgICAgIHZhciBpc01ldGhvZENhbGwgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIjtcbiAgICAgIHZhciBhcmdzID0gd2lkZ2V0U2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICk7XG4gICAgICB2YXIgcmV0dXJuVmFsdWUgPSB0aGlzO1xuXG4gICAgICBpZiAoIGlzTWV0aG9kQ2FsbCApIHtcblxuICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIGVtcHR5IGNvbGxlY3Rpb24sIHdlIG5lZWQgdG8gaGF2ZSB0aGUgaW5zdGFuY2UgbWV0aG9kXG4gICAgICAgIC8vIHJldHVybiB1bmRlZmluZWQgaW5zdGVhZCBvZiB0aGUgalF1ZXJ5IGluc3RhbmNlXG4gICAgICAgIGlmICggIXRoaXMubGVuZ3RoICYmIG9wdGlvbnMgPT09IFwiaW5zdGFuY2VcIiApIHtcbiAgICAgICAgICByZXR1cm5WYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG1ldGhvZFZhbHVlO1xuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gJC5kYXRhKCB0aGlzLCBmdWxsTmFtZSApO1xuXG4gICAgICAgICAgICBpZiAoIG9wdGlvbnMgPT09IFwiaW5zdGFuY2VcIiApIHtcbiAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBpbnN0YW5jZTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoICFpbnN0YW5jZSApIHtcbiAgICAgICAgICAgICAgcmV0dXJuICQuZXJyb3IoIFwiY2Fubm90IGNhbGwgbWV0aG9kcyBvbiBcIiArIG5hbWUgK1xuICAgICAgICAgICAgICAgIFwiIHByaW9yIHRvIGluaXRpYWxpemF0aW9uOyBcIiArXG4gICAgICAgICAgICAgICAgXCJhdHRlbXB0ZWQgdG8gY2FsbCBtZXRob2QgJ1wiICsgb3B0aW9ucyArIFwiJ1wiICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggISQuaXNGdW5jdGlvbiggaW5zdGFuY2VbIG9wdGlvbnMgXSApIHx8IG9wdGlvbnMuY2hhckF0KCAwICkgPT09IFwiX1wiICkge1xuICAgICAgICAgICAgICByZXR1cm4gJC5lcnJvciggXCJubyBzdWNoIG1ldGhvZCAnXCIgKyBvcHRpb25zICsgXCInIGZvciBcIiArIG5hbWUgK1xuICAgICAgICAgICAgICAgIFwiIHdpZGdldCBpbnN0YW5jZVwiICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1ldGhvZFZhbHVlID0gaW5zdGFuY2VbIG9wdGlvbnMgXS5hcHBseSggaW5zdGFuY2UsIGFyZ3MgKTtcblxuICAgICAgICAgICAgaWYgKCBtZXRob2RWYWx1ZSAhPT0gaW5zdGFuY2UgJiYgbWV0aG9kVmFsdWUgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBtZXRob2RWYWx1ZSAmJiBtZXRob2RWYWx1ZS5qcXVlcnkgP1xuICAgICAgICAgICAgICAgIHJldHVyblZhbHVlLnB1c2hTdGFjayggbWV0aG9kVmFsdWUuZ2V0KCkgKSA6XG4gICAgICAgICAgICAgICAgbWV0aG9kVmFsdWU7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9ICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgLy8gQWxsb3cgbXVsdGlwbGUgaGFzaGVzIHRvIGJlIHBhc3NlZCBvbiBpbml0XG4gICAgICAgIGlmICggYXJncy5sZW5ndGggKSB7XG4gICAgICAgICAgb3B0aW9ucyA9ICQud2lkZ2V0LmV4dGVuZC5hcHBseSggbnVsbCwgWyBvcHRpb25zIF0uY29uY2F0KCBhcmdzICkgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGluc3RhbmNlID0gJC5kYXRhKCB0aGlzLCBmdWxsTmFtZSApO1xuICAgICAgICAgIGlmICggaW5zdGFuY2UgKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5vcHRpb24oIG9wdGlvbnMgfHwge30gKTtcbiAgICAgICAgICAgIGlmICggaW5zdGFuY2UuX2luaXQgKSB7XG4gICAgICAgICAgICAgIGluc3RhbmNlLl9pbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQuZGF0YSggdGhpcywgZnVsbE5hbWUsIG5ldyBvYmplY3QoIG9wdGlvbnMsIHRoaXMgKSApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgfTtcbiAgfTtcblxuICAkLldpZGdldCA9IGZ1bmN0aW9uKCAvKiBvcHRpb25zLCBlbGVtZW50ICovICkge307XG4gICQuV2lkZ2V0Ll9jaGlsZENvbnN0cnVjdG9ycyA9IFtdO1xuXG4gICQuV2lkZ2V0LnByb3RvdHlwZSA9IHtcbiAgICB3aWRnZXROYW1lOiBcIndpZGdldFwiLFxuICAgIHdpZGdldEV2ZW50UHJlZml4OiBcIlwiLFxuICAgIGRlZmF1bHRFbGVtZW50OiBcIjxkaXY+XCIsXG5cbiAgICBvcHRpb25zOiB7XG4gICAgICBjbGFzc2VzOiB7fSxcbiAgICAgIGRpc2FibGVkOiBmYWxzZSxcblxuICAgICAgLy8gQ2FsbGJhY2tzXG4gICAgICBjcmVhdGU6IG51bGxcbiAgICB9LFxuXG4gICAgX2NyZWF0ZVdpZGdldDogZnVuY3Rpb24oIG9wdGlvbnMsIGVsZW1lbnQgKSB7XG4gICAgICBlbGVtZW50ID0gJCggZWxlbWVudCB8fCB0aGlzLmRlZmF1bHRFbGVtZW50IHx8IHRoaXMgKVsgMCBdO1xuICAgICAgdGhpcy5lbGVtZW50ID0gJCggZWxlbWVudCApO1xuICAgICAgdGhpcy51dWlkID0gd2lkZ2V0VXVpZCsrO1xuICAgICAgdGhpcy5ldmVudE5hbWVzcGFjZSA9IFwiLlwiICsgdGhpcy53aWRnZXROYW1lICsgdGhpcy51dWlkO1xuXG4gICAgICB0aGlzLmJpbmRpbmdzID0gJCgpO1xuICAgICAgdGhpcy5ob3ZlcmFibGUgPSAkKCk7XG4gICAgICB0aGlzLmZvY3VzYWJsZSA9ICQoKTtcbiAgICAgIHRoaXMuY2xhc3Nlc0VsZW1lbnRMb29rdXAgPSB7fTtcblxuICAgICAgaWYgKCBlbGVtZW50ICE9PSB0aGlzICkge1xuICAgICAgICAkLmRhdGEoIGVsZW1lbnQsIHRoaXMud2lkZ2V0RnVsbE5hbWUsIHRoaXMgKTtcbiAgICAgICAgdGhpcy5fb24oIHRydWUsIHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgaWYgKCBldmVudC50YXJnZXQgPT09IGVsZW1lbnQgKSB7XG4gICAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuICAgICAgICB0aGlzLmRvY3VtZW50ID0gJCggZWxlbWVudC5zdHlsZSA/XG5cbiAgICAgICAgICAvLyBFbGVtZW50IHdpdGhpbiB0aGUgZG9jdW1lbnRcbiAgICAgICAgICBlbGVtZW50Lm93bmVyRG9jdW1lbnQgOlxuXG4gICAgICAgICAgLy8gRWxlbWVudCBpcyB3aW5kb3cgb3IgZG9jdW1lbnRcbiAgICAgICAgICBlbGVtZW50LmRvY3VtZW50IHx8IGVsZW1lbnQgKTtcbiAgICAgICAgdGhpcy53aW5kb3cgPSAkKCB0aGlzLmRvY3VtZW50WyAwIF0uZGVmYXVsdFZpZXcgfHwgdGhpcy5kb2N1bWVudFsgMCBdLnBhcmVudFdpbmRvdyApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9wdGlvbnMgPSAkLndpZGdldC5leHRlbmQoIHt9LFxuICAgICAgICB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHRoaXMuX2dldENyZWF0ZU9wdGlvbnMoKSxcbiAgICAgICAgb3B0aW9ucyApO1xuXG4gICAgICB0aGlzLl9jcmVhdGUoKTtcblxuICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7XG4gICAgICAgIHRoaXMuX3NldE9wdGlvbkRpc2FibGVkKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fdHJpZ2dlciggXCJjcmVhdGVcIiwgbnVsbCwgdGhpcy5fZ2V0Q3JlYXRlRXZlbnREYXRhKCkgKTtcbiAgICAgIHRoaXMuX2luaXQoKTtcbiAgICB9LFxuXG4gICAgX2dldENyZWF0ZU9wdGlvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH0sXG5cbiAgICBfZ2V0Q3JlYXRlRXZlbnREYXRhOiAkLm5vb3AsXG5cbiAgICBfY3JlYXRlOiAkLm5vb3AsXG5cbiAgICBfaW5pdDogJC5ub29wLFxuXG4gICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgIHRoaXMuX2Rlc3Ryb3koKTtcbiAgICAgICQuZWFjaCggdGhpcy5jbGFzc2VzRWxlbWVudExvb2t1cCwgZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG4gICAgICAgIHRoYXQuX3JlbW92ZUNsYXNzKCB2YWx1ZSwga2V5ICk7XG4gICAgICB9ICk7XG5cbiAgICAgIC8vIFdlIGNhbiBwcm9iYWJseSByZW1vdmUgdGhlIHVuYmluZCBjYWxscyBpbiAyLjBcbiAgICAgIC8vIGFsbCBldmVudCBiaW5kaW5ncyBzaG91bGQgZ28gdGhyb3VnaCB0aGlzLl9vbigpXG4gICAgICB0aGlzLmVsZW1lbnRcbiAgICAgICAgLm9mZiggdGhpcy5ldmVudE5hbWVzcGFjZSApXG4gICAgICAgIC5yZW1vdmVEYXRhKCB0aGlzLndpZGdldEZ1bGxOYW1lICk7XG4gICAgICB0aGlzLndpZGdldCgpXG4gICAgICAgIC5vZmYoIHRoaXMuZXZlbnROYW1lc3BhY2UgKVxuICAgICAgICAucmVtb3ZlQXR0ciggXCJhcmlhLWRpc2FibGVkXCIgKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgZXZlbnRzIGFuZCBzdGF0ZXNcbiAgICAgIHRoaXMuYmluZGluZ3Mub2ZmKCB0aGlzLmV2ZW50TmFtZXNwYWNlICk7XG4gICAgfSxcblxuICAgIF9kZXN0cm95OiAkLm5vb3AsXG5cbiAgICB3aWRnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgICB9LFxuXG4gICAgb3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcbiAgICAgIHZhciBvcHRpb25zID0ga2V5O1xuICAgICAgdmFyIHBhcnRzO1xuICAgICAgdmFyIGN1ck9wdGlvbjtcbiAgICAgIHZhciBpO1xuXG4gICAgICBpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDAgKSB7XG5cbiAgICAgICAgLy8gRG9uJ3QgcmV0dXJuIGEgcmVmZXJlbmNlIHRvIHRoZSBpbnRlcm5hbCBoYXNoXG4gICAgICAgIHJldHVybiAkLndpZGdldC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiICkge1xuXG4gICAgICAgIC8vIEhhbmRsZSBuZXN0ZWQga2V5cywgZS5nLiwgXCJmb28uYmFyXCIgPT4geyBmb286IHsgYmFyOiBfX18gfSB9XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgcGFydHMgPSBrZXkuc3BsaXQoIFwiLlwiICk7XG4gICAgICAgIGtleSA9IHBhcnRzLnNoaWZ0KCk7XG4gICAgICAgIGlmICggcGFydHMubGVuZ3RoICkge1xuICAgICAgICAgIGN1ck9wdGlvbiA9IG9wdGlvbnNbIGtleSBdID0gJC53aWRnZXQuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zWyBrZXkgXSApO1xuICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrICkge1xuICAgICAgICAgICAgY3VyT3B0aW9uWyBwYXJ0c1sgaSBdIF0gPSBjdXJPcHRpb25bIHBhcnRzWyBpIF0gXSB8fCB7fTtcbiAgICAgICAgICAgIGN1ck9wdGlvbiA9IGN1ck9wdGlvblsgcGFydHNbIGkgXSBdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBrZXkgPSBwYXJ0cy5wb3AoKTtcbiAgICAgICAgICBpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgKSB7XG4gICAgICAgICAgICByZXR1cm4gY3VyT3B0aW9uWyBrZXkgXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGN1ck9wdGlvblsga2V5IF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1ck9wdGlvblsga2V5IF0gPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zWyBrZXkgXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHRoaXMub3B0aW9uc1sga2V5IF07XG4gICAgICAgICAgfVxuICAgICAgICAgIG9wdGlvbnNbIGtleSBdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fc2V0T3B0aW9ucyggb3B0aW9ucyApO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgX3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuICAgICAgdmFyIGtleTtcblxuICAgICAgZm9yICgga2V5IGluIG9wdGlvbnMgKSB7XG4gICAgICAgIHRoaXMuX3NldE9wdGlvbigga2V5LCBvcHRpb25zWyBrZXkgXSApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG4gICAgICBpZiAoIGtleSA9PT0gXCJjbGFzc2VzXCIgKSB7XG4gICAgICAgIHRoaXMuX3NldE9wdGlvbkNsYXNzZXMoIHZhbHVlICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub3B0aW9uc1sga2V5IF0gPSB2YWx1ZTtcblxuICAgICAgaWYgKCBrZXkgPT09IFwiZGlzYWJsZWRcIiApIHtcbiAgICAgICAgdGhpcy5fc2V0T3B0aW9uRGlzYWJsZWQoIHZhbHVlICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBfc2V0T3B0aW9uQ2xhc3NlczogZnVuY3Rpb24oIHZhbHVlICkge1xuICAgICAgdmFyIGNsYXNzS2V5LCBlbGVtZW50cywgY3VycmVudEVsZW1lbnRzO1xuXG4gICAgICBmb3IgKCBjbGFzc0tleSBpbiB2YWx1ZSApIHtcbiAgICAgICAgY3VycmVudEVsZW1lbnRzID0gdGhpcy5jbGFzc2VzRWxlbWVudExvb2t1cFsgY2xhc3NLZXkgXTtcbiAgICAgICAgaWYgKCB2YWx1ZVsgY2xhc3NLZXkgXSA9PT0gdGhpcy5vcHRpb25zLmNsYXNzZXNbIGNsYXNzS2V5IF0gfHxcbiAgICAgICAgICAhY3VycmVudEVsZW1lbnRzIHx8XG4gICAgICAgICAgIWN1cnJlbnRFbGVtZW50cy5sZW5ndGggKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBhcmUgZG9pbmcgdGhpcyB0byBjcmVhdGUgYSBuZXcgalF1ZXJ5IG9iamVjdCBiZWNhdXNlIHRoZSBfcmVtb3ZlQ2xhc3MoKSBjYWxsXG4gICAgICAgIC8vIG9uIHRoZSBuZXh0IGxpbmUgaXMgZ29pbmcgdG8gZGVzdHJveSB0aGUgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IGVsZW1lbnRzIGJlaW5nXG4gICAgICAgIC8vIHRyYWNrZWQuIFdlIG5lZWQgdG8gc2F2ZSBhIGNvcHkgb2YgdGhpcyBjb2xsZWN0aW9uIHNvIHRoYXQgd2UgY2FuIGFkZCB0aGUgbmV3IGNsYXNzZXNcbiAgICAgICAgLy8gYmVsb3cuXG4gICAgICAgIGVsZW1lbnRzID0gJCggY3VycmVudEVsZW1lbnRzLmdldCgpICk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKCBjdXJyZW50RWxlbWVudHMsIGNsYXNzS2V5ICk7XG5cbiAgICAgICAgLy8gV2UgZG9uJ3QgdXNlIF9hZGRDbGFzcygpIGhlcmUsIGJlY2F1c2UgdGhhdCB1c2VzIHRoaXMub3B0aW9ucy5jbGFzc2VzXG4gICAgICAgIC8vIGZvciBnZW5lcmF0aW5nIHRoZSBzdHJpbmcgb2YgY2xhc3Nlcy4gV2Ugd2FudCB0byB1c2UgdGhlIHZhbHVlIHBhc3NlZCBpbiBmcm9tXG4gICAgICAgIC8vIF9zZXRPcHRpb24oKSwgdGhpcyBpcyB0aGUgbmV3IHZhbHVlIG9mIHRoZSBjbGFzc2VzIG9wdGlvbiB3aGljaCB3YXMgcGFzc2VkIHRvXG4gICAgICAgIC8vIF9zZXRPcHRpb24oKS4gV2UgcGFzcyB0aGlzIHZhbHVlIGRpcmVjdGx5IHRvIF9jbGFzc2VzKCkuXG4gICAgICAgIGVsZW1lbnRzLmFkZENsYXNzKCB0aGlzLl9jbGFzc2VzKCB7XG4gICAgICAgICAgZWxlbWVudDogZWxlbWVudHMsXG4gICAgICAgICAga2V5czogY2xhc3NLZXksXG4gICAgICAgICAgY2xhc3NlczogdmFsdWUsXG4gICAgICAgICAgYWRkOiB0cnVlXG4gICAgICAgIH0gKSApO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBfc2V0T3B0aW9uRGlzYWJsZWQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgIHRoaXMuX3RvZ2dsZUNsYXNzKCB0aGlzLndpZGdldCgpLCB0aGlzLndpZGdldEZ1bGxOYW1lICsgXCItZGlzYWJsZWRcIiwgbnVsbCwgISF2YWx1ZSApO1xuXG4gICAgICAvLyBJZiB0aGUgd2lkZ2V0IGlzIGJlY29taW5nIGRpc2FibGVkLCB0aGVuIG5vdGhpbmcgaXMgaW50ZXJhY3RpdmVcbiAgICAgIGlmICggdmFsdWUgKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKCB0aGlzLmhvdmVyYWJsZSwgbnVsbCwgXCJ1aS1zdGF0ZS1ob3ZlclwiICk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKCB0aGlzLmZvY3VzYWJsZSwgbnVsbCwgXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGVuYWJsZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2V0T3B0aW9ucyggeyBkaXNhYmxlZDogZmFsc2UgfSApO1xuICAgIH0sXG5cbiAgICBkaXNhYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zZXRPcHRpb25zKCB7IGRpc2FibGVkOiB0cnVlIH0gKTtcbiAgICB9LFxuXG4gICAgX2NsYXNzZXM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuICAgICAgdmFyIGZ1bGwgPSBbXTtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKCB7XG4gICAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgY2xhc3NlczogdGhpcy5vcHRpb25zLmNsYXNzZXMgfHwge31cbiAgICAgIH0sIG9wdGlvbnMgKTtcblxuICAgICAgZnVuY3Rpb24gcHJvY2Vzc0NsYXNzU3RyaW5nKCBjbGFzc2VzLCBjaGVja09wdGlvbiApIHtcbiAgICAgICAgdmFyIGN1cnJlbnQsIGk7XG4gICAgICAgIGZvciAoIGkgPSAwOyBpIDwgY2xhc3Nlcy5sZW5ndGg7IGkrKyApIHtcbiAgICAgICAgICBjdXJyZW50ID0gdGhhdC5jbGFzc2VzRWxlbWVudExvb2t1cFsgY2xhc3Nlc1sgaSBdIF0gfHwgJCgpO1xuICAgICAgICAgIGlmICggb3B0aW9ucy5hZGQgKSB7XG4gICAgICAgICAgICBjdXJyZW50ID0gJCggJC51bmlxdWUoIGN1cnJlbnQuZ2V0KCkuY29uY2F0KCBvcHRpb25zLmVsZW1lbnQuZ2V0KCkgKSApICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN1cnJlbnQgPSAkKCBjdXJyZW50Lm5vdCggb3B0aW9ucy5lbGVtZW50ICkuZ2V0KCkgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhhdC5jbGFzc2VzRWxlbWVudExvb2t1cFsgY2xhc3Nlc1sgaSBdIF0gPSBjdXJyZW50O1xuICAgICAgICAgIGZ1bGwucHVzaCggY2xhc3Nlc1sgaSBdICk7XG4gICAgICAgICAgaWYgKCBjaGVja09wdGlvbiAmJiBvcHRpb25zLmNsYXNzZXNbIGNsYXNzZXNbIGkgXSBdICkge1xuICAgICAgICAgICAgZnVsbC5wdXNoKCBvcHRpb25zLmNsYXNzZXNbIGNsYXNzZXNbIGkgXSBdICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX29uKCBvcHRpb25zLmVsZW1lbnQsIHtcbiAgICAgICAgXCJyZW1vdmVcIjogXCJfdW50cmFja0NsYXNzZXNFbGVtZW50XCJcbiAgICAgIH0gKTtcblxuICAgICAgaWYgKCBvcHRpb25zLmtleXMgKSB7XG4gICAgICAgIHByb2Nlc3NDbGFzc1N0cmluZyggb3B0aW9ucy5rZXlzLm1hdGNoKCAvXFxTKy9nICkgfHwgW10sIHRydWUgKTtcbiAgICAgIH1cbiAgICAgIGlmICggb3B0aW9ucy5leHRyYSApIHtcbiAgICAgICAgcHJvY2Vzc0NsYXNzU3RyaW5nKCBvcHRpb25zLmV4dHJhLm1hdGNoKCAvXFxTKy9nICkgfHwgW10gKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZ1bGwuam9pbiggXCIgXCIgKTtcbiAgICB9LFxuXG4gICAgX3VudHJhY2tDbGFzc2VzRWxlbWVudDogZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgJC5lYWNoKCB0aGF0LmNsYXNzZXNFbGVtZW50TG9va3VwLCBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcbiAgICAgICAgaWYgKCAkLmluQXJyYXkoIGV2ZW50LnRhcmdldCwgdmFsdWUgKSAhPT0gLTEgKSB7XG4gICAgICAgICAgdGhhdC5jbGFzc2VzRWxlbWVudExvb2t1cFsga2V5IF0gPSAkKCB2YWx1ZS5ub3QoIGV2ZW50LnRhcmdldCApLmdldCgpICk7XG4gICAgICAgIH1cbiAgICAgIH0gKTtcbiAgICB9LFxuXG4gICAgX3JlbW92ZUNsYXNzOiBmdW5jdGlvbiggZWxlbWVudCwga2V5cywgZXh0cmEgKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdG9nZ2xlQ2xhc3MoIGVsZW1lbnQsIGtleXMsIGV4dHJhLCBmYWxzZSApO1xuICAgIH0sXG5cbiAgICBfYWRkQ2xhc3M6IGZ1bmN0aW9uKCBlbGVtZW50LCBrZXlzLCBleHRyYSApIHtcbiAgICAgIHJldHVybiB0aGlzLl90b2dnbGVDbGFzcyggZWxlbWVudCwga2V5cywgZXh0cmEsIHRydWUgKTtcbiAgICB9LFxuXG4gICAgX3RvZ2dsZUNsYXNzOiBmdW5jdGlvbiggZWxlbWVudCwga2V5cywgZXh0cmEsIGFkZCApIHtcbiAgICAgIGFkZCA9ICggdHlwZW9mIGFkZCA9PT0gXCJib29sZWFuXCIgKSA/IGFkZCA6IGV4dHJhO1xuICAgICAgdmFyIHNoaWZ0ID0gKCB0eXBlb2YgZWxlbWVudCA9PT0gXCJzdHJpbmdcIiB8fCBlbGVtZW50ID09PSBudWxsICksXG4gICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgZXh0cmE6IHNoaWZ0ID8ga2V5cyA6IGV4dHJhLFxuICAgICAgICAgIGtleXM6IHNoaWZ0ID8gZWxlbWVudCA6IGtleXMsXG4gICAgICAgICAgZWxlbWVudDogc2hpZnQgPyB0aGlzLmVsZW1lbnQgOiBlbGVtZW50LFxuICAgICAgICAgIGFkZDogYWRkXG4gICAgICAgIH07XG4gICAgICBvcHRpb25zLmVsZW1lbnQudG9nZ2xlQ2xhc3MoIHRoaXMuX2NsYXNzZXMoIG9wdGlvbnMgKSwgYWRkICk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgX29uOiBmdW5jdGlvbiggc3VwcHJlc3NEaXNhYmxlZENoZWNrLCBlbGVtZW50LCBoYW5kbGVycyApIHtcbiAgICAgIHZhciBkZWxlZ2F0ZUVsZW1lbnQ7XG4gICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuXG4gICAgICAvLyBObyBzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgZmxhZywgc2h1ZmZsZSBhcmd1bWVudHNcbiAgICAgIGlmICggdHlwZW9mIHN1cHByZXNzRGlzYWJsZWRDaGVjayAhPT0gXCJib29sZWFuXCIgKSB7XG4gICAgICAgIGhhbmRsZXJzID0gZWxlbWVudDtcbiAgICAgICAgZWxlbWVudCA9IHN1cHByZXNzRGlzYWJsZWRDaGVjaztcbiAgICAgICAgc3VwcHJlc3NEaXNhYmxlZENoZWNrID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIE5vIGVsZW1lbnQgYXJndW1lbnQsIHNodWZmbGUgYW5kIHVzZSB0aGlzLmVsZW1lbnRcbiAgICAgIGlmICggIWhhbmRsZXJzICkge1xuICAgICAgICBoYW5kbGVycyA9IGVsZW1lbnQ7XG4gICAgICAgIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIGRlbGVnYXRlRWxlbWVudCA9IHRoaXMud2lkZ2V0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50ID0gZGVsZWdhdGVFbGVtZW50ID0gJCggZWxlbWVudCApO1xuICAgICAgICB0aGlzLmJpbmRpbmdzID0gdGhpcy5iaW5kaW5ncy5hZGQoIGVsZW1lbnQgKTtcbiAgICAgIH1cblxuICAgICAgJC5lYWNoKCBoYW5kbGVycywgZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVyICkge1xuICAgICAgICBmdW5jdGlvbiBoYW5kbGVyUHJveHkoKSB7XG5cbiAgICAgICAgICAvLyBBbGxvdyB3aWRnZXRzIHRvIGN1c3RvbWl6ZSB0aGUgZGlzYWJsZWQgaGFuZGxpbmdcbiAgICAgICAgICAvLyAtIGRpc2FibGVkIGFzIGFuIGFycmF5IGluc3RlYWQgb2YgYm9vbGVhblxuICAgICAgICAgIC8vIC0gZGlzYWJsZWQgY2xhc3MgYXMgbWV0aG9kIGZvciBkaXNhYmxpbmcgaW5kaXZpZHVhbCBwYXJ0c1xuICAgICAgICAgIGlmICggIXN1cHByZXNzRGlzYWJsZWRDaGVjayAmJlxuICAgICAgICAgICAgKCBpbnN0YW5jZS5vcHRpb25zLmRpc2FibGVkID09PSB0cnVlIHx8XG4gICAgICAgICAgICAgICQoIHRoaXMgKS5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICkgKSApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuICggdHlwZW9mIGhhbmRsZXIgPT09IFwic3RyaW5nXCIgPyBpbnN0YW5jZVsgaGFuZGxlciBdIDogaGFuZGxlciApXG4gICAgICAgICAgICAuYXBwbHkoIGluc3RhbmNlLCBhcmd1bWVudHMgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvcHkgdGhlIGd1aWQgc28gZGlyZWN0IHVuYmluZGluZyB3b3Jrc1xuICAgICAgICBpZiAoIHR5cGVvZiBoYW5kbGVyICE9PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgIGhhbmRsZXJQcm94eS5ndWlkID0gaGFuZGxlci5ndWlkID1cbiAgICAgICAgICAgIGhhbmRsZXIuZ3VpZCB8fCBoYW5kbGVyUHJveHkuZ3VpZCB8fCAkLmd1aWQrKztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtYXRjaCA9IGV2ZW50Lm1hdGNoKCAvXihbXFx3Oi1dKilcXHMqKC4qKSQvICk7XG4gICAgICAgIHZhciBldmVudE5hbWUgPSBtYXRjaFsgMSBdICsgaW5zdGFuY2UuZXZlbnROYW1lc3BhY2U7XG4gICAgICAgIHZhciBzZWxlY3RvciA9IG1hdGNoWyAyIF07XG5cbiAgICAgICAgaWYgKCBzZWxlY3RvciApIHtcbiAgICAgICAgICBkZWxlZ2F0ZUVsZW1lbnQub24oIGV2ZW50TmFtZSwgc2VsZWN0b3IsIGhhbmRsZXJQcm94eSApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW1lbnQub24oIGV2ZW50TmFtZSwgaGFuZGxlclByb3h5ICk7XG4gICAgICAgIH1cbiAgICAgIH0gKTtcbiAgICB9LFxuXG4gICAgX29mZjogZnVuY3Rpb24oIGVsZW1lbnQsIGV2ZW50TmFtZSApIHtcbiAgICAgIGV2ZW50TmFtZSA9ICggZXZlbnROYW1lIHx8IFwiXCIgKS5zcGxpdCggXCIgXCIgKS5qb2luKCB0aGlzLmV2ZW50TmFtZXNwYWNlICsgXCIgXCIgKSArXG4gICAgICAgIHRoaXMuZXZlbnROYW1lc3BhY2U7XG4gICAgICBlbGVtZW50Lm9mZiggZXZlbnROYW1lICkub2ZmKCBldmVudE5hbWUgKTtcblxuICAgICAgLy8gQ2xlYXIgdGhlIHN0YWNrIHRvIGF2b2lkIG1lbW9yeSBsZWFrcyAoIzEwMDU2KVxuICAgICAgdGhpcy5iaW5kaW5ncyA9ICQoIHRoaXMuYmluZGluZ3Mubm90KCBlbGVtZW50ICkuZ2V0KCkgKTtcbiAgICAgIHRoaXMuZm9jdXNhYmxlID0gJCggdGhpcy5mb2N1c2FibGUubm90KCBlbGVtZW50ICkuZ2V0KCkgKTtcbiAgICAgIHRoaXMuaG92ZXJhYmxlID0gJCggdGhpcy5ob3ZlcmFibGUubm90KCBlbGVtZW50ICkuZ2V0KCkgKTtcbiAgICB9LFxuXG4gICAgX2RlbGF5OiBmdW5jdGlvbiggaGFuZGxlciwgZGVsYXkgKSB7XG4gICAgICBmdW5jdGlvbiBoYW5kbGVyUHJveHkoKSB7XG4gICAgICAgIHJldHVybiAoIHR5cGVvZiBoYW5kbGVyID09PSBcInN0cmluZ1wiID8gaW5zdGFuY2VbIGhhbmRsZXIgXSA6IGhhbmRsZXIgKVxuICAgICAgICAgIC5hcHBseSggaW5zdGFuY2UsIGFyZ3VtZW50cyApO1xuICAgICAgfVxuICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KCBoYW5kbGVyUHJveHksIGRlbGF5IHx8IDAgKTtcbiAgICB9LFxuXG4gICAgX2hvdmVyYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XG4gICAgICB0aGlzLmhvdmVyYWJsZSA9IHRoaXMuaG92ZXJhYmxlLmFkZCggZWxlbWVudCApO1xuICAgICAgdGhpcy5fb24oIGVsZW1lbnQsIHtcbiAgICAgICAgbW91c2VlbnRlcjogZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgIHRoaXMuX2FkZENsYXNzKCAkKCBldmVudC5jdXJyZW50VGFyZ2V0ICksIG51bGwsIFwidWktc3RhdGUtaG92ZXJcIiApO1xuICAgICAgICB9LFxuICAgICAgICBtb3VzZWxlYXZlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgICAgICAgdGhpcy5fcmVtb3ZlQ2xhc3MoICQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKSwgbnVsbCwgXCJ1aS1zdGF0ZS1ob3ZlclwiICk7XG4gICAgICAgIH1cbiAgICAgIH0gKTtcbiAgICB9LFxuXG4gICAgX2ZvY3VzYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XG4gICAgICB0aGlzLmZvY3VzYWJsZSA9IHRoaXMuZm9jdXNhYmxlLmFkZCggZWxlbWVudCApO1xuICAgICAgdGhpcy5fb24oIGVsZW1lbnQsIHtcbiAgICAgICAgZm9jdXNpbjogZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgIHRoaXMuX2FkZENsYXNzKCAkKCBldmVudC5jdXJyZW50VGFyZ2V0ICksIG51bGwsIFwidWktc3RhdGUtZm9jdXNcIiApO1xuICAgICAgICB9LFxuICAgICAgICBmb2N1c291dDogZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKCAkKCBldmVudC5jdXJyZW50VGFyZ2V0ICksIG51bGwsIFwidWktc3RhdGUtZm9jdXNcIiApO1xuICAgICAgICB9XG4gICAgICB9ICk7XG4gICAgfSxcblxuICAgIF90cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZXZlbnQsIGRhdGEgKSB7XG4gICAgICB2YXIgcHJvcCwgb3JpZztcbiAgICAgIHZhciBjYWxsYmFjayA9IHRoaXMub3B0aW9uc1sgdHlwZSBdO1xuXG4gICAgICBkYXRhID0gZGF0YSB8fCB7fTtcbiAgICAgIGV2ZW50ID0gJC5FdmVudCggZXZlbnQgKTtcbiAgICAgIGV2ZW50LnR5cGUgPSAoIHR5cGUgPT09IHRoaXMud2lkZ2V0RXZlbnRQcmVmaXggP1xuICAgICAgICB0eXBlIDpcbiAgICAgICAgdGhpcy53aWRnZXRFdmVudFByZWZpeCArIHR5cGUgKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAvLyBUaGUgb3JpZ2luYWwgZXZlbnQgbWF5IGNvbWUgZnJvbSBhbnkgZWxlbWVudFxuICAgICAgLy8gc28gd2UgbmVlZCB0byByZXNldCB0aGUgdGFyZ2V0IG9uIHRoZSBuZXcgZXZlbnRcbiAgICAgIGV2ZW50LnRhcmdldCA9IHRoaXMuZWxlbWVudFsgMCBdO1xuXG4gICAgICAvLyBDb3B5IG9yaWdpbmFsIGV2ZW50IHByb3BlcnRpZXMgb3ZlciB0byB0aGUgbmV3IGV2ZW50XG4gICAgICBvcmlnID0gZXZlbnQub3JpZ2luYWxFdmVudDtcbiAgICAgIGlmICggb3JpZyApIHtcbiAgICAgICAgZm9yICggcHJvcCBpbiBvcmlnICkge1xuICAgICAgICAgIGlmICggISggcHJvcCBpbiBldmVudCApICkge1xuICAgICAgICAgICAgZXZlbnRbIHByb3AgXSA9IG9yaWdbIHByb3AgXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoIGV2ZW50LCBkYXRhICk7XG4gICAgICByZXR1cm4gISggJC5pc0Z1bmN0aW9uKCBjYWxsYmFjayApICYmXG4gICAgICAgIGNhbGxiYWNrLmFwcGx5KCB0aGlzLmVsZW1lbnRbIDAgXSwgWyBldmVudCBdLmNvbmNhdCggZGF0YSApICkgPT09IGZhbHNlIHx8XG4gICAgICAgIGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICk7XG4gICAgfVxuICB9O1xuXG4gICQuZWFjaCggeyBzaG93OiBcImZhZGVJblwiLCBoaWRlOiBcImZhZGVPdXRcIiB9LCBmdW5jdGlvbiggbWV0aG9kLCBkZWZhdWx0RWZmZWN0ICkge1xuICAgICQuV2lkZ2V0LnByb3RvdHlwZVsgXCJfXCIgKyBtZXRob2QgXSA9IGZ1bmN0aW9uKCBlbGVtZW50LCBvcHRpb25zLCBjYWxsYmFjayApIHtcbiAgICAgIGlmICggdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7IGVmZmVjdDogb3B0aW9ucyB9O1xuICAgICAgfVxuXG4gICAgICB2YXIgaGFzT3B0aW9ucztcbiAgICAgIHZhciBlZmZlY3ROYW1lID0gIW9wdGlvbnMgP1xuICAgICAgICBtZXRob2QgOlxuICAgICAgICBvcHRpb25zID09PSB0cnVlIHx8IHR5cGVvZiBvcHRpb25zID09PSBcIm51bWJlclwiID9cbiAgICAgICAgZGVmYXVsdEVmZmVjdCA6XG4gICAgICAgIG9wdGlvbnMuZWZmZWN0IHx8IGRlZmF1bHRFZmZlY3Q7XG5cbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgaWYgKCB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJudW1iZXJcIiApIHtcbiAgICAgICAgb3B0aW9ucyA9IHsgZHVyYXRpb246IG9wdGlvbnMgfTtcbiAgICAgIH1cblxuICAgICAgaGFzT3B0aW9ucyA9ICEkLmlzRW1wdHlPYmplY3QoIG9wdGlvbnMgKTtcbiAgICAgIG9wdGlvbnMuY29tcGxldGUgPSBjYWxsYmFjaztcblxuICAgICAgaWYgKCBvcHRpb25zLmRlbGF5ICkge1xuICAgICAgICBlbGVtZW50LmRlbGF5KCBvcHRpb25zLmRlbGF5ICk7XG4gICAgICB9XG5cbiAgICAgIGlmICggaGFzT3B0aW9ucyAmJiAkLmVmZmVjdHMgJiYgJC5lZmZlY3RzLmVmZmVjdFsgZWZmZWN0TmFtZSBdICkge1xuICAgICAgICBlbGVtZW50WyBtZXRob2QgXSggb3B0aW9ucyApO1xuICAgICAgfSBlbHNlIGlmICggZWZmZWN0TmFtZSAhPT0gbWV0aG9kICYmIGVsZW1lbnRbIGVmZmVjdE5hbWUgXSApIHtcbiAgICAgICAgZWxlbWVudFsgZWZmZWN0TmFtZSBdKCBvcHRpb25zLmR1cmF0aW9uLCBvcHRpb25zLmVhc2luZywgY2FsbGJhY2sgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQucXVldWUoIGZ1bmN0aW9uKCBuZXh0ICkge1xuICAgICAgICAgICQoIHRoaXMgKVsgbWV0aG9kIF0oKTtcbiAgICAgICAgICBpZiAoIGNhbGxiYWNrICkge1xuICAgICAgICAgICAgY2FsbGJhY2suY2FsbCggZWxlbWVudFsgMCBdICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfSApO1xuICAgICAgfVxuICAgIH07XG4gIH0gKTtcblxuICB2YXIgd2lkZ2V0ID0gJC53aWRnZXQ7XG5cblxuXG5cbn0pKTtcbiJdfQ==
